<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yokra info</title>
  </head>
  <body>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-analytics.js";
        import { getFirestore , collection, addDoc, getDocs,} from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-storage.js";
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyC_05cP9iqq6dZ1wB78_r7-XYFrTO7guhM",
          authDomain: "yokraproject-470b9.firebaseapp.com",
          projectId: "yokraproject-470b9",
          storageBucket: "yokraproject-470b9.appspot.com",
          messagingSenderId: "868266877329",
          appId: "1:868266877329:web:ab972b5684b001dc177a30",
          measurementId: "G-FW1ZGF06M6",
          storageBucket: "gs://yokraproject-470b9.appspot.com"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        //initialize the variables
        const products_list = [];
        
        //call the functions
        getData();
        function getData(){
          getDocs(collection(db, "products"))
          .then((querySnapshot) => {
            querySnapshot.forEach((doc) => {
              console.log("get data called");
              const corerct_product = {
                type: doc.data().type,
                name: doc.data().name,
                price: doc.data().price,
                uri: doc.data().uri,
                specialNotes: doc.data().specialNotes};
              products_list.push(corerct_product);
              show_data(corerct_product);
            })
          })
        }

        
        function show_data(data){
          const div_element = document.createElement("div");
          const image_element = document.createElement("img");
          const name_element = document.createElement("a");
          name_element.innerHTML = data.name;
          name_element.href = "products-edit.html";
          getDownloadURL(ref(storage, data.uri)).then((url) => {
            image_element.src = url;
          })
          div_element.className = "card";
          div_element.appendChild(name_element);
          div_element.appendChild(image_element);
          document.body.appendChild(div_element);
        }
      </script>
</body>
</html>